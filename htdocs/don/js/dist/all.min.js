!function(t,i,s){"use strict";function e(t,i){var s;return function(){var e=this,n=arguments;clearTimeout(s),s=setTimeout(function(){s=null,t.apply(e,n)},i)}}function n(t,i){this.container=t,this.settings=s.extend({},a,i),this.maxHeight=this.settings.maxHeight,this.margin=this.settings.margin,this.listeners={resize:s.proxy(e(this.layout,150),this)},this.init()}var h="imageWall",a={maxHeight:180,margin:6};n.prototype={init:function(){return s(this.container).addClass("image-wall"),this.update(),s(t).on("resize",this.listeners.resize),this},update:function(){var t=this;return this.images=[],this.widths=[],s("img",this.container).each(function(){var i=this.width,s=this.height;s!==t.maxHeight&&(i=Math.floor(i*(t.maxHeight/s))),t.widths.push(i),t.images.push(this)}),this.numImages=this.images.length,this.layout(),this},destroy:function(){s(t).off("resize",this.listeners.resize),s(this.container).removeClass("image-wall"),this.container.style.minHeight=null,s(this.images).each(function(){this.style.width=this.style.height=this.style.margin=null,this.style.top=this.style.left=null})},layout:function(){return t.requestAnimationFrame?function(){var i=this;return t.requestAnimationFrame(function(){i.doLayout()}),this}:function(){return this.doLayout(),this}}(),doLayout:function(){var t,s,e,n,h,a,o,r,l,u,g,m=i.documentElement,c=m.scrollHeight===m.clientHeight,f=0,d=0,y=[];for(c&&(m.style.overflowY="scroll"),n=this.container.clientWidth,s=e=0;d<this.numImages;){for(h=0,a=0,t=0;n>1.1*a;){if(t=this.widths[f+h++],!t){h--;break}a+=t+2*this.margin}for(o=n/a,r=Math.floor(this.maxHeight*o),a=0,t=0;h>t;)d+=1,s=a,l=Math.floor(this.widths[f+t]*o),a+=l+2*this.margin,g={width:l,height:r,x:s,y:e},y.push(g),t++;n>a&&(u=n-a,l+=u,a+=u),a>n&&(u=a-n,l-=u,a-=u),g.width=l,e+=r+2*this.margin,f+=h}return this.handleOrphans(h,y),this.applyDimensions(y),c&&(m.style.overflowY=null),this},handleOrphans:function(t,i){var s,e,n,h,a=this.numImages-t,o=1.1,r=this.maxHeight*o,l=!1;for(s=a;s<this.numImages;s++)if(e=i[s],e.height>r){l=!0;break}if(l)for(h=0,s=a;s<this.numImages;s++)e=i[s],n=this.maxHeight/e.height,e.height=this.maxHeight,e.width=Math.floor(e.width*n),e.x=h,h+=e.width+2*this.margin},applyDimensions:function(t){var i,s,e=0,n=t.length,h=t[n-1];for(this.container.style.minHeight=h.y+h.height+this.margin+"px",n;n>e;e++)i=t[e],s=this.images[e],s.style.width=i.width+"px",s.style.height=i.height+"px",s.style.margin=this.margin+"px",s.style.top=i.y+"px",s.style.left=i.x+"px"}},s[h]=s.fn[h]=function(t){return"string"==typeof t?(this.each(function(){var i=s.data(this,"plugin_"+h);"destroy"===t&&s.data(this,"plugin_"+h,null),!i instanceof n||["update","destroy","layout"].indexOf(t)>-1&&i[t]()}),this):this instanceof s?this.each(function(){s.data(this,"plugin_"+h)||s.data(this,"plugin_"+h,new n(this,t))}):s.extend(a,t)}}(this,this.document,this.jQuery),function(t,i){"use strict";var s=t.Embobidon;i(function(){i(".fancybox").fancybox({padding:0,helpers:{media:{}}}),i.getJSON(s.api.stats,function(t){console.log(t),i(".campaign-amount").html(t.amount),i(".campaign-contributors").html(t.contributors)}),i(".image-wall").imageWall({maxHeight:300})})}(this,this.jQuery);
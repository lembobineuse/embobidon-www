!function(t,i,n){"use strict";function s(t,i){var n;return function(){var s=this,e=arguments;clearTimeout(n),n=setTimeout(function(){n=null,t.apply(s,e)},i)}}function e(t,i){this.container=t,this.settings=n.extend({},h,i),this.maxHeight=this.settings.maxHeight,this.margin=this.settings.margin,this.listeners={resize:n.proxy(s(this.layout,150),this)},this.bound=!1,this.init()}var a="imageWall",h={maxHeight:180,margin:6};e.prototype={init:function(){return this.update(),this},update:function(){var i=this;return n(this.container).imagesLoaded().progress(function(t,i){i.isLoaded||n(i.img).remove()}).always(function(){i.collect(),i.layout(),i.bound||(i.bound=!0,n(t).on("resize",i.listeners.resize))}),this},destroy:function(){n(t).off("resize",this.listeners.resize),n(this.container).removeClass("image-wall-container"),this.container.style.minHeight=null,n(this.images).each(function(){this.style.width=this.style.height=this.style.margin=null,this.style.top=this.style.left=null})},layout:function(){return t.requestAnimationFrame?function(){var i=this;return t.requestAnimationFrame(function(){i.doLayout()}),this}:function(){return this.doLayout(),this}}(),collect:function(){var t=this;this.images=[],this.widths=[],n("img",this.container).each(function(){var i=this.width,n=this.height;n!==t.maxHeight&&(i=Math.floor(i*(t.maxHeight/n))),t.widths.push(i),t.images.push(this)}),this.numImages=this.images.length,n(this.container).addClass("image-wall-container")},doLayout:function(){var t,n,s,e,a,h,o,r,l,u,c,m=i.documentElement,g=m.scrollHeight===m.clientHeight,d=0,f=0,p=[];for(g&&(m.style.overflowY="scroll"),e=this.container.clientWidth,n=s=0;f<this.numImages;){for(a=0,h=0,t=0;e>1.1*h;){if(t=this.widths[d+a++],!t){a--;break}h+=t+2*this.margin}for(o=e/h,r=Math.floor(this.maxHeight*o),h=0,t=0;a>t;)f+=1,n=h,l=Math.floor(this.widths[d+t]*o),h+=l+2*this.margin,c={width:l,height:r,x:n,y:s},p.push(c),t++;e>h&&(u=e-h,l+=u,h+=u),h>e&&(u=h-e,l-=u,h-=u),c.width=l,s+=r+2*this.margin,d+=a}return this.handleOrphans(a,p),this.applyDimensions(p),g&&(m.style.overflowY=null),this},handleOrphans:function(t,i){var n,s,e,a,h=this.numImages-t,o=1.1,r=this.maxHeight*o,l=!1;for(n=h;n<this.numImages;n++)if(s=i[n],s.height>r){l=!0;break}if(l)for(a=0,n=h;n<this.numImages;n++)s=i[n],e=this.maxHeight/s.height,s.height=this.maxHeight,s.width=Math.floor(s.width*e),s.x=a,a+=s.width+2*this.margin},applyDimensions:function(t){var i,n,s=0,e=t.length,a=t[e-1];for(this.container.style.minHeight=a.y+a.height+this.margin+"px",e;e>s;s++)i=t[s],n=this.images[s],n.style.width=i.width+"px",n.style.height=i.height+"px",n.style.margin=this.margin+"px",n.style.top=i.y+"px",n.style.left=i.x+"px"}},n[a]=n.fn[a]=function(t){return"string"==typeof t?(this.each(function(){var i=n.data(this,"plugin_"+a);"destroy"===t&&n.data(this,"plugin_"+a,null),!i instanceof e||["update","destroy","layout"].indexOf(t)>-1&&i[t]()}),this):this instanceof n?this.each(function(){n.data(this,"plugin_"+a)||n.data(this,"plugin_"+a,new e(this,t))}):n.extend(h,t)}}(this,this.document,this.jQuery),function(t,i){"use strict";function n(){return i.ajax({url:e.api.comment_list,dataType:"json"})}function s(t){var n=i('<div class="comment-list"/>'),s="";return i.each(t.result,function(t,i){s+='<div class="comment"><div class="comment__donation">'+i.donation+'</div><div class="comment__supporter">'+i.name+'</div><div class="comment__content">'+i.comment+"</div></div>"}),n.html(s)}var e=t.Embobidon;i(function(){i("html").removeClass("no-js").addClass("js"),i(".fancybox").fancybox({padding:0,helpers:{media:{}}}),i.getJSON("http://api.helloasso.com/l-embobineuse",function(t){i(".campaign-amount").html(t.funding+" â‚¬"),i(".campaign-contributors").html(t.supporters).parent().css("cursor","pointer").on("click",function(){i.fancybox.showLoading(),n().done(function(t){var n=s(t);i.fancybox(n,{maxWidth:720})}).always(function(){i.fancybox.hideLoading()})})}),i(".image-wall").imageWall({maxHeight:300}),i("#supporters").length&&(i.fancybox.showLoading(),n().done(function(t){var n=s(t);i("#supporters").append(n)}).always(function(){i.fancybox.hideLoading()}))})}(this,this.jQuery);